<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
    <title>dwblair.github.com - Packing</title>
    <link rel="stylesheet" type="text/css" href="./css/default.css"></link>
    <script type="text/javascript" src="./processing-1.3.6.js"></script>
 <script type="text/javascript" src="./processing-1.3.6.js"></script>

    <!--
        This is a source-file-less sketch, loaded from inline source code in
        the html header. This only works if the script specifies a data-processing-target
    -->
    <script type="text/processing" data-processing-target="targetcanvas">
// below, the function "setup()" gets run once at the beginning, and thereafter the function "draw()" is run over and over again.


int L=250;
float inL;
int numCircles;
float circleRadius=10;
float inR;

//int numLines=0;
int t=0;
int i=0;
int N=0;
float x;
float y;
float r;

String coords[];
String params[];
int numLines;


//int numLines = coords.length;

float scaling=.5;

void setup() {
  
frameRate(15);
//background(0);
//fill(0,255,0);
paramsF=loadStrings("./params.in");
String thisLine=paramsF[1]; // the first line of the file will have the number of particles
//text(4,width/2,height/2);
float[] params=float(split(thisLine,','));
N=int(params[0]);
inL=float(params[1]);
inR=float(params[2]);
circleRadius=inR;

size(inL*scaling,inL*scaling+70);
  //int counter=0;
  myFont=createFont("FFScala",10);
  textFont(myFont);

text("loading ...",width/2,height/2);

coords=loadStrings("./coords000.txt");

numLines = coords.length;

/*
String thisLine=coords[1]; // the first line of the file will have the number of particles
//text(4,width/2,height/2);
float[] params=float(split(thisLine,','));
N=int(params[0]);
inL=float(params[1]);
inR=float(params[2]);
circleRadius=inR;
*/

/*
  size(inL,inL);
  //int counter=0;
  myFont=createFont("FFScala",12);
  textFont(myFont); 
*/

  

i=0; //need to fast forward to here
}

void draw() {
background(200);

//i=0;

int counter=0;
  while (counter<N) {
    //text(i,width/2,height/2);
    //int j = (N+1)*t+i+1;
    //int j=i+1;
    //text(3,width/2,height/2);
    String thisLine = coords[i]; //inital +1 is because of '@' character; next one is because of "N" line at beginning of file
    float[] p = float(split(thisLine, ','));
    x=p[0];
    y=p[1];
    int cellNum=p[3];

    //added radius bit
    r=p[2];

    fill(255);
    stroke(0);
    ellipse(x*scaling,y*scaling,2*r*scaling,2*r*scaling);
    fill(0,200,0);
    text(counter,x*scaling-5,y*scaling+5);
    counter=counter+1;
    i=i+1;
 }
String thisLine=coords[i];
float[] p = float(split(thisLine, ' '));
int time=p[1];
		    float pressure=p[3];
		    float density=p[4];
int cellSize=p[2];
stroke(255,0,0);
int cellRow = 0;
int cellColumn =0;
while (cellColumn<(height/cellSize)) {
cellRow=0;
while (cellRow<(width/cellSize)) {
//line(0,cellSize*cellRow,width,cellSize*cellRow);
cellRow++;
}
//line(cellSize*cellColumn,0,cellSize*cellColumn,height);
cellColumn++;
}
				 stroke(0,0,0);
				 line(0.,inL*scaling,inL*scaling,inL*scaling);
fill(255,0,0);
				 text("density =",width-90,height-30);
				 text(density,width-35,height-30);
				 text("pressure =",width-90,height-50);
				 text(pressure,width-30,height-50);
				 
text("sweep =",width-90,height-10);
text(time,width-40,height-10);
i=i+1; // for the '@' character
//text(t,width/2,height/2);
t=t+1; //update 

if (i>=numLines) {
i=0; //start at the beginning again
t=0;
}


}



 </script>

  </head>
  <body>



    <div id="content">
      <div id="sidebar">
        <nav>
          <h1>Navigation</h1>
          <ul>
            <li><a href="http://dwblair.github.com/">Home</a></li>
<!---            <li><a href="/notes.html">Notes</a></li>-->
	    <li><a href="https://github.com/dwblair/dwblair.github.com/wiki">Notes / Working Docs</a></li>
            <!--<li><a href="/research-agenda.html">Research agenda</a></li>
            <li><a href="/publications.html">Publications</a></li>
            <li><a href="/past-research.html">Past research</a></li>
            <li><a href="/media/cv.pdf">Curriculum Vitae</a></li>-->
          </ul>
<!--          <h1>Related Links</h1>
          <ul>
            <li><a href="http://goldnerlab.physics.umass.edu/wiki/">Research group</a></li>
            <li><a href="http://www.github.com/bgamari">Github</a></li>
          </ul>
        </nav>-->
      </div>

      <section id="main">
	<center>
	<canvas id="targetcanvas" style="border: 1px solid black; image-rendering: -webkit-optimize-contrast !important; " tabindex="0" width="250" height="290"></canvas></center>
<!---
<div style="float: right; padding: 2em;">
   <img src="/media/experiments.jpg" style="width: 150px;"/>
</div>
-->

      <!---
![Haskell logo](/media/experiments.jpg)
-->
  <!--  <img src="./densityVsSweepNum.png"" style="width: 400px;" /> --> 
<div style="float: right; padding: 2em;">
  

<h1 id="about">Circle Packing: a simulated annealing approach</h1>

<ul>
            <li> A Monte Carlo simulation of circle packing, using the NPT ensemble. </li>
	    <li> Our aim is to explore various flavors of a simulated annealing (SA) algorithm in which the system was taken from an initial, low-pressure, easy-to-equilibrate state to a  nal, high-pressure state, via an annealing schedule consisting of a series of steps in inverse pressure.    </li>
	     <li>  Between each pressure increase, a Metropolis algorithm appropriate to the disc NPT ensemble is used to equilibrate the system.    </li>
	    <li>  The equilibration procedure consists of two types of Monte Carlo moves: translations of the circles within the box, and changes in the volume of the entire system. At each step of the equilibration procedure, a circle is selected at random; then, one of the two types of moves is selected at random, with probabilities .9 and .1 for translation and volume change, respectively.   </li>
 <li> Once a circle and a move type are selected, the move is attempted. If the move results in any overlaps among the N squares, the move is rejected. If it does not, then for translation moves, the move is accepted; for volume change 'moves' that would result in a volume change dV, the volume change is accepted with probability pacc = min[1, exp(-Beta * P * dV )].   </li>
 <li>   In practice, rather than changing the volume of the entire system, the periodic box in the simulations was kept at a constant size, and the radii of the individual circles were all rescaled, in order to achieve the desired new volume. </li>
 
	     <li>For this initial instance of the code, the 'pressure schedule' is simplified to a simple 'jump' in pressure to the final pressure; this will be changed to a more elaborate pressure increase schedule after optimal step size parameters are determined.     </li>
	    </ul>

<h2 id="about">Thus far ...</h2>

  <ul>
	    <li> Simulated annealing code is <a href="https://github.com/dwblair/packing">on github</a>.</li>
	     <li>Simulation data for pressure=
	      <a href="./coords0.html">10.</a>,
	      <a href="./coords1.html">3.</a>,
	      <a href="./coords2.html">2.</a>,
	      <a href="./coords3.html">1.</a>,
	      <a href="./coords4.html">0.5</a>,
	      <a href="./coords5.html">0.1</a>
	   
	   </li>

	    <li> Density vs sweep # for various pressures:</li>
</ul>
<p>
<a href="./densityVsSweepNum.png"><img src="./densityVsSweepNum.png" style="width: 600px;" /></a> 
	    

<!---
### Recent Photos

<object width="400" height="300"> <param name="flashvars" value="offsite=true&lang=en-us&page_show_url=%2Fphotos%2F80184146%40N06%2Fshow%2F&page_show_back_url=%2Fphotos%2F80184146%40N06%2F&user_id=80184146@N06&jump_to="></param> <param name="movie" value="http://www.flickr.com/apps/slideshow/show.swf?v=122138"></param> <param name="allowFullScreen" value="true"></param><embed type="application/x-shockwave-flash" src="http://www.flickr.com/apps/slideshow/show.swf?v=122138" allowFullScreen="true" flashvars="offsite=true&lang=en-us&page_show_url=%2Fphotos%2F80184146%40N06%2Fshow%2F&page_show_back_url=%2Fphotos%2F80184146%40N06%2F&user_id=80184146@N06&jump_to=" width="500" height="375"></embed></object>
-->




      </section>
    </div>
<!---
    <footer id="footer">
      <span>Generated by <a href="http://jaspervdj.be/hakyll/index.html">Hakyll</a>.</span>
    </footer>-->

  </body>
</html>

