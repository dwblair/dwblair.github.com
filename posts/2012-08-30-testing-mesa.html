<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
    <title>bgamari.github.com - Running mesa from git on Ubuntu</title>
    <link rel="stylesheet" type="text/css" href="../css/default.css"></link>
  </head>
  <body>
    <div id="content">
      <div id="sidebar">
        <nav>
          <h1>Navigation</h1>
          <ul>
            <li><a href="../index.html">Home</a></li>
            <li><a href="../posts.html">Notes</a></li>
            <!--<li><a href="/research-agenda.html">Research agenda</a></li>
            <li><a href="/publications.html">Publications</a></li>
            <li><a href="/past-research.html">Past research</a></li>
            <li><a href="/media/cv.pdf">Curriculum Vitae</a></li>-->
          </ul>
<!--          <h1>Related Links</h1>
          <ul>
            <li><a href="http://goldnerlab.physics.umass.edu/wiki/">Research group</a></li>
            <li><a href="http://www.github.com/bgamari">Github</a></li>
          </ul>
        </nav>-->
      </div>

      <section id="main">
      <h1 id="running-mesa-from-git-on-ubuntu">Running mesa from git on Ubuntu</h1>
<p>This was written against Ubuntu 12.04 although it’s unlikely things will change appreciably. You should know what you are doing (and have a good reason to need mesa from git) if you are going to follow these instructions. Following these instructions without proper knowledge could bring harm to you, your pets, or toaster.</p>
<p>First we’ll need some prerequisite packages,</p>
<pre><code>$ sudo apt-get install libpciaccess-dev</code></pre>
<p>Let’s setup a directory to work within,</p>
<pre><code>$ MESA_ROOT=/opt/mesa
$ mkdir $MESA_ROOT
$ cd $MESA_ROOT
$ cat &lt;&lt;EOF &gt; env.sh
export MESA_ROOT=$MESA_ROOT
export LD_LIBRARY_PATH=\$MESA_ROOT/prefix/lib:\$LD_LIBRARY_PATH
PATH=\$MESA_ROOT/prefix/bin:\$PATH
export PKG_CONFIG_PATH=\$MESA_ROOT/prefix/lib/pkgconfig:\$PKG_CONFIG_PATH
EOF
$ source env.sh</code></pre>
<p>First we need to check out <code>libdrm</code>,</p>
<pre><code>$ git clone git://anongit.freedesktop.org/mesa/drm
$ cd drm
$ ./autogen.sh --prefix=$MESA_ROOT/prefix
$ make
$ make install</code></pre>
<p>Now for mesa. Since I’m working on Intel hardware, I’ll exclude the nouveau and radeon drivers from the build,</p>
<pre><code>$ cd $MESA_ROOT
$ git clone git://anongit.freedesktop.org/mesa/mesa
$ cd mesa
$ ./autogen.sh --prefix=$MESA_ROOT/prefix --with-dri-drivers=swrast,i915,i965
$ make
$ make install</code></pre>
<p>Now we need to point the system towards our newly built drivers,</p>
<pre><code>$ sudo sh -c &quot;echo LD_LIBRARY_PATH=$MESA_ROOT/prefix/lib:\$LD_LIBRARY_PATH &gt;&gt; /etc/environment&quot;
$ sudo sh -c &quot;echo DRI_DRIVER_PATH=$MESA_ROOT/prefix/lib/dri &gt;&gt; /etc/environment&quot;</code></pre>
<p>In principle restarting your X session should now give you a shiny new mesa.</p>
      </section>
    </div>

    <footer id="footer">
      <span>Generated by <a href="http://jaspervdj.be/hakyll/index.html">Hakyll</a>.</span>
    </footer>
  </body>
</html>

